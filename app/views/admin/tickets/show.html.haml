.row
  .col-md-12
    .page-header
      %h1
        = @ticket.title
        Ticket
        %small
          = humanized_money_with_symbol @ticket.price
      %p.text-muted
        People who bought this ticket
.row
  .col-md-12
    %table.table.table-hover.datatable
      %thead
        %th #
        %th Name
        %th E-Mail
        %th Affiliation
        %th.text-center Quantity
        %th Paid
      %tbody
        - @ticket.buyers.each_with_index do |buyer, index|
          %tr
            %td
              = index + 1
            %td
              = buyer.name
            %td
              = buyer.email
            %td
              = buyer.affiliation
            %td.text-center
              = buyer.ticket_purchases.find_by(ticket_id: @ticket.id).quantity

            %td{'data-order' => "#{@ticket.paid?(buyer)}"}
              = check_box_tag @conference.short_title, @ticket.ticket_purchases.find_by(user: buyer).id, @ticket.paid?(buyer),
                              model: 'ticket_purchase', attribute: 'paid',
                              class: 'switch-checkbox',
                              data: { size: 'small',
                                      off_color: 'warning',
                                      on_text: 'Yes',
                                      off_text: 'No' }

